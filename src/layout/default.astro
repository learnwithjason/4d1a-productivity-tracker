---
import { getAuth } from '../astro-clerk';
const auth = await getAuth(
	{ client: Astro },
	{
		loadUser: true,
	},
);

if (auth instanceof Response) {
	return auth;
}
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>JFDI (app version)</title>
	</head>
	<body>
		<header>
			<img src="/jfdi.svg" alt="Just Fucking Do It" />
		</header>

		<main>
			<slot />
		</main>

		<footer>
			<nav>
				<div class="navContainer">
					{
						!auth.userId ? (
							<a data-clerk-login href="#">
								<svg
									xmlns="http://www.w3.org/2000/svg"
									aria-labelledby="icon-login-label"
									fill="none"
									viewBox="0 0 70 71"
								>
									<path
										fill="#17294B"
										fill-rule="evenodd"
										d="M19.12 57.1c.96-13.68 7.23-18.12 9.5-19.73.2-.15.38-.27.51-.38A11.46 11.46 0 0 1 24 27.37C24 21.1 28.92 16 35 16s11 5.1 11 11.37c0 4.05-2.05 7.6-5.13 9.62 0 0 8.75 5 9.99 20.12a27 27 0 1 0-31.73-.02ZM70 35.24a35 35 0 1 1-70 0 35 35 0 0 1 70 0Z"
										clip-rule="evenodd"
									/>
								</svg>
								<span id="icon-login-label">login</span>
							</a>
						) : (
							<div class="clerk" />
						)
					}
				</div>
				<a href="/track">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						aria-labelledby="icon-track-label"
						fill="none"
						viewBox="0 0 71 71"
						><path
							fill="#17294B"
							fill-rule="evenodd"
							d="M62.67 35.5a27 27 0 1 1-54 0 27 27 0 0 1 54 0Zm8 0a35 35 0 1 1-70 0 35 35 0 0 1 70 0Zm-39.2 14.88a3.8 3.8 0 0 0 3.14 1.45c1.4 0 2.5-.52 3.26-1.67l15.19-23.49a4.4 4.4 0 0 0 .75-2.37 3.5 3.5 0 0 0-3.6-3.58c-1.39 0-2.27.5-3.11 1.9L34.54 42.9l-6.3-7.7a3.34 3.34 0 0 0-2.75-1.3 3.5 3.5 0 0 0-3.56 3.6c0 .93.25 1.69 1.03 2.6l8.5 10.27Z"
							clip-rule="evenodd"></path></svg
					>
					<span id="icon-track-label">track</span>
				</a>
				<a href="/about">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						aria-labelledby="icon-about-label"
						fill="none"
						viewBox="0 0 71 71"
						><path
							fill="#17294B"
							fill-rule="evenodd"
							d="M62.33 35.5a27 27 0 1 1-54 0 27 27 0 0 1 54 0Zm8 0a35 35 0 1 1-70 0 35 35 0 0 1 70 0Zm-39.15 5.28c.03.82.7 1.47 1.52 1.47h4.05c.74 0 1.34-.6 1.34-1.34 0-2.48.96-3.72 4.4-5.68 3.66-2.1 5.55-4.76 5.55-8.56v-.05c0-5.76-4.9-9.79-12.3-9.79-7.06 0-11.4 3.47-12.38 8.59-.21 1.1.71 2.03 1.84 2.03l3.09-.02c1.06 0 1.89-.87 2.3-1.86.72-1.78 2.4-2.86 4.68-2.86 2.95 0 4.92 1.75 4.92 4.13v.06c0 2.38-1.01 3.62-4.35 5.57-3.58 2.05-5 4.34-4.66 8.31Zm-.96 9.46c0 2.6 1.81 4.23 4.71 4.23s4.69-1.62 4.69-4.23c0-2.64-1.79-4.26-4.69-4.26-2.9 0-4.71 1.62-4.71 4.26Z"
							clip-rule="evenodd"></path></svg
					>
					<span id="icon-about-label">about</span>
				</a>
				<a href="/settings">
					<svg
						xmlns="http://www.w3.org/2000/svg"
						aria-labelledby="icon-settings-label"
						fill="none"
						viewBox="0 0 70 71"
						><path
							fill="#17294B"
							fill-rule="evenodd"
							d="M62.45 27.62c-.6-.21-1.04-.7-1.25-1.3a27.5 27.5 0 0 0-1.36-3.28 2.09 2.09 0 0 1-.03-1.8l2.8-6.02a2 2 0 0 0-.4-2.26L57.3 8.04a2 2 0 0 0-2.26-.4l-6.01 2.8c-.58.27-1.24.25-1.8-.03a27.5 27.5 0 0 0-3.3-1.36c-.6-.2-1.08-.66-1.3-1.25l-2.26-6.23A2 2 0 0 0 38.48.25h-6.96a2 2 0 0 0-1.88 1.32L27.37 7.8c-.21.6-.7 1.04-1.3 1.25a27.5 27.5 0 0 0-3.28 1.36c-.57.28-1.23.3-1.8.04l-6.02-2.8a2 2 0 0 0-2.26.39L7.8 12.96a2 2 0 0 0-.4 2.26l2.8 6.01c.27.58.25 1.24-.03 1.8a27.49 27.49 0 0 0-1.36 3.3c-.2.6-.66 1.08-1.25 1.3l-6.23 2.26A2 2 0 0 0 0 31.77v6.96a2 2 0 0 0 1.32 1.88l6.23 2.27c.6.21 1.04.7 1.25 1.3.38 1.13.84 2.22 1.36 3.28.28.57.3 1.23.03 1.8l-2.8 6.02a2 2 0 0 0 .4 2.26l4.92 4.92a2 2 0 0 0 2.26.4l6.01-2.8a2.09 2.09 0 0 1 1.8.03c1.07.52 2.16.98 3.3 1.36.6.2 1.08.66 1.3 1.25l2.26 6.23a2 2 0 0 0 1.88 1.32h6.96a2 2 0 0 0 1.88-1.32l2.27-6.23c.21-.6.7-1.04 1.3-1.25a27.5 27.5 0 0 0 3.28-1.36c.57-.28 1.23-.3 1.8-.03l6.02 2.8a2 2 0 0 0 2.26-.4l4.92-4.92a2 2 0 0 0 .4-2.26l-2.8-6.01a2.09 2.09 0 0 1 .03-1.8 27.5 27.5 0 0 0 1.36-3.3c.2-.6.66-1.08 1.25-1.3l6.23-2.26A2 2 0 0 0 70 38.73v-6.96a2 2 0 0 0-1.32-1.88l-6.23-2.27ZM35 57a22 22 0 1 0 0-44 22 22 0 0 0 0 44Z"
							clip-rule="evenodd"></path></svg
					>
					<span id="icon-settings-label">settings</span>
				</a>
			</nav>
		</footer>
	</body>
</html>

<script src="../client/auth.ts"></script>

<style is:global>
	:root {
		--color-black: #000;
		--color-white: #fff;
		--color-green: #13ec6a;
		--color-red: #ef6d3e;
		--color-border: #0a2e18;
		--color-text: #3f4a5f;
		--color-gray-light: #dee0e2;
		--color-blue-dark: #17294b;
	}

	* {
		box-sizing: border-box;
	}

	:is(h1, h2) {
		color: var(--color-border);
		font-size: clamp(1.5rem, 10vw, 3.25rem);
		line-height: 1;
		margin: 0 0 1rem;
		text-align: center;
	}

	p {
		font-size: 1.25rem;
		font-weight: 300;
		margin: 0;
		text-align: center;
	}

	input {
		border: 1px solid var(--color-border);
		border-radius: 3px;
		color: var(--color-text);
		display: block;
		font-family: inherit;
		font-size: clamp(1.125rem, 5vw, 2rem);
		line-height: 1.45;
		margin-block-start: 1.5rem;
		padding: 0.5rem;
		width: 100%;
	}

	.button,
	button {
		background: var(--color-blue-dark);
		border: none;
		border-radius: 3px;
		color: var(--color-white);
		display: block;
		font-size: clamp(1.25rem, 7.5vw, 2.75rem);
		font-weight: bold;
		letter-spacing: 0.05em;
		line-height: 1;
		margin-block-start: 1.5rem;
		padding-block: 0.5rem;
		text-align: center;
		text-decoration: none;
		text-transform: uppercase;
		transition: all 150ms linear;
		width: 100%;

		&:is(:hover, :focus) {
			background: var(--color-gray-light);
			color: var(--color-black);
			cursor: pointer;
		}
	}
</style>

<style>
	html {
		color: var(--color-text);
		font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
			Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji',
			'Segoe UI Symbol';
		font-size: 18px;
		line-height: 1.45;
	}

	body {
		margin: 0;
	}

	:is(header, main, nav) {
		margin-inline: auto;
		max-width: 500px;
		width: 90vw;
	}

	header {
		padding-block: 1.5rem;

		& img {
			display: block;
		}
	}

	main {
		padding-block-start: 1rem;
		padding-block-end: calc(6rem + 60px);
	}

	footer {
		background: var(--color-gray-light);
		border-top: 1px solid var(--color-text);
		bottom: 0;
		left: 0;
		padding-block: 0.5rem;
		position: fixed;
		width: 100vw;

		& nav {
			align-items: start;
			display: grid;
			grid-template-columns: repeat(4, 1fr);
		}

		& .navContainer {
			padding: 0.5rem;
			text-align: center;
		}

		& button {
			background: transparent;
			color: var(--color-blue-dark);
			display: block;
			font-size: 0.75rem;
			font-variant: small-caps;
			font-weight: normal;
			letter-spacing: 0.1em;
			line-height: 1;
			margin-top: 0.25rem;
		}

		& a {
			color: var(--color-blue-dark);
			display: block;
			padding: 0.5rem;
			text-align: center;
			text-decoration: none;
		}

		& svg {
			aspect-ratio: 1;
			display: block;
			width: clamp(30px, 6.5vw, 50px);
		}

		& svg {
			margin-inline: auto;
		}

		& :global(span) {
			display: block;
			font-size: 0.75rem;
			font-variant: small-caps;
			letter-spacing: 0.1em;
			line-height: 1;
			margin-top: 0.25rem;
		}
	}
</style>
